---
title: "Vessel Model"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
***
#### The Vessel Strike Model (ModelVessel) is an object of class *rfPermute* that includes known-outcome vessel injury cases, included as the data.frame *data.vessel* in the R-Package *SeriousInjury*.

```
# Create randomForest model (using R-Package rfPermute) using known-outcome vessel strike data

# make sure you have devtools installed
if (!require('devtools')) install.packages('devtools')

# install from GitHub
devtools::install_github('EricArcher/rfPermute')

library(rfPermute)

# set.seed for reproducibility
set.seed(123)

# how many RF trees to build
size.RF = 1000

# covariates included in ModelVessel
vessel.covariates = which(names(data.vessel)%in%c("calf.juv", "decline", "extensive.severe", "fluke.peduncle", "head", "healing", "laceration.deep","laceration.shallow", "pectoral", "VessSpd", "VessSz"))

# balance sample size for each health class; we are equally-interested in correctly      
#  predicting non-serious and serious injuries
 
sampsize = balancedSampsize(data.vessel$Health.status)

# RF Vessel Strike model

ModelVessel = rfPermute(data.vessel$Health.status ~ .,
 data.vessel[,c(vessel.covariates)], sampsize=sampsize, ntree=size.RF, 
  replace=FALSE, importance=TRUE, proximity=TRUE)

# RF Vessel Strike model Confusion Matrix
ModelVessel
```




---
title: Injury Narratives
output: html_document
---
***
#### The SeriousInjury package includes the following data frames:

##### *WhaleData* is raw data for all whale injury cases, with injury descriptions in the 'Narrative' field. 

##### Data used in Random Forest (RF) models includes known-outcome cases (Health.status="DEAD.DECLINE" or "RECOVERED"), excluding
cases where human intervention to remove entanglements occurred. Model data includes two data frames; *data.entangle* and *data.vessel*,
used in RF models.

##### The data frame *data.test.entangle* includes cases with Health.status="UNKNOWN" and is used with the predict() function and the RF object 'ModelEntanglement' to assign each case to "DEAD.DECLINE" or "RECOVERED".

```
# Example code to identify the covariate 'decline' from injury narratives in data.frame 'WhaleData'.
#   function InjuryCovariates() applied to data.frame 'WhaleData'
#    data.frame narrative field must be named 'Narrative' for use with InjuryCovariates().
#     use function 'grepl' to search for words/phrases in 'Narrative'.
#      code covariates numerically as 1/0, aligned with their TRUE/FALSE (=presence/absence) state.

# Evidence of a health decline? 
#  Search 'Narrative' for words/phrases associated with health declines.
    
    decline <- grepl(" abnormal|chronic|deteriorat|fair|
     compromise|scoliosis|deform|cyamid|lice|lethargic|
      lesion|discolor|diatom|poor cond|poor health|poor body|
       poor over|poor skin|rake|skin|slough|thin |emaciated|malnourish|
        underweight|starv|mobility", WhaleData$Narrative, ignore.case=T)
    
    decline <- as.numeric(lapply(decline, as.numeric))
     decline
    
# Use InjuryCovariates() to append all covariates to each row of 'WhaleData' 
    
    head(WhaleData)

    new.data.frame <- InjuryCovariates(WhaleData)

    head(new.data.frame)
```


---
title: Injury Narratives
output: html_document
---
***
#### The data.frame *WhaleData* is included with the R-Package *SeriousInjury*. *WhaleData* includes all whale injury cases used to develop classification tree models to assess injury severity. Injury descriptions are included in the 'Narrative' field of *WhaleData*. Covariates are defined and identified as presence / absence values or factors (Vessel size and speed covariates) for each row of *WhaleData*, using the function WhaleInjuryCovariates().
```
# Example code to identify the covariate 'decline' from injury narratives in data.frame 'WhaleData'.
#   function WhaleInjuryCovariates() applied to data.frame 'WhaleData'
#    data.frame narrative field must be named 'Narrative' for use with WhaleInjuryCovariates().
#     use function 'grepl' to search for words/phrases in 'Narrative'.
#      code covariates numerically as 1/0, aligned with their TRUE/FALSE (=presence/absence) state.

# Evidence of a health decline? 
#  Search 'Narrative' for words/phrases associated with health declines.
    
    decline <- grepl(" abnormal|chronic|deteriorat|fair|
     compromise|scoliosis|deform|cyamid|lice|lethargic|
      lesion|discolor|diatom|poor cond|poor health|poor body|
       poor over|poor skin|rake|skin|slough|thin |emaciated|malnourish|
        underweight|starv|mobility", WhaleData$Narrative, ignore.case=T)
    
    decline <- as.numeric(lapply(decline, as.numeric))
     decline
    
# Use WhaleInjuryCovariates() to append all covariates to each row of 'WhaleData' 
    
    head(WhaleData)

    new.data.frame <- WhaleInjuryCovariates(WhaleData)

    head(new.data.frame)
```

